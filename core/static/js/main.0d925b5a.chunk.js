(this.webpackJsonpqrmenu_frontend=this.webpackJsonpqrmenu_frontend||[]).push([[0],{152:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);n(146),n(147);var c=n(1),a=n.n(c),s=n(17),r=n.n(s),i=(n(152),n(22)),o=n(12),l=n(20);function j(e,t){let{data:n=null,token:c=null,method:a="GET"}=t;return fetch(e,{method:a,headers:{Authorization:c?"Token ".concat(c):"","Content-Type":"application/json"},body:"GET"!==a&&"DELETE"!==a?JSON.stringify(n):null}).then((e=>e.ok?"DELETE"===a||e.json():e.json().then((t=>{if(400===e.status){const e=Object.keys(t).map((e=>"".concat(t[e].join(" "))));throw new Error(e.join(" "))}throw new Error(JSON.stringify(t))})).catch((t=>{if("SyntaxError"===t.name)throw new Error(e.statusText);throw new Error(t)})))).catch((e=>{Object(l.b)(e.message,{type:"error"})}))}function d(e,t){return j("/api/places/".concat(e),{token:t})}function b(e,t,n){return j("/api/places/".concat(e),{data:t,token:n,method:"PATCH"})}var h=n(2);const x=Object(c.createContext)(),O=e=>{let{children:t}=e;const[n,a]=Object(c.useState)(localStorage.getItem("token")),[s,r]=Object(c.useState)(!1),i={token:n,loading:s,signIn:async(e,t,n)=>{r(!0);const c=await function(e,t){return j("/auth/token/login/",{data:{username:e,password:t},method:"POST"})}(e,t);console.log("response",c),c&&c.auth_token&&(localStorage.setItem("token",c.auth_token),a(c.auth_token),n()),r(!1)},signOut:()=>{localStorage.removeItem("token"),a("")},register:async(e,t,n)=>{r(!0);const c=await function(e,t){return j("/auth/users/",{data:{username:e,password:t},method:"POST"})}(e,t);c&&c.id&&n(),r(!1)}};return Object(h.jsx)(x.Provider,{value:i,children:t})};var u=x;var m=function(e){let{children:t,...n}=e;const a=Object(c.useContext)(u);return Object(h.jsx)(o.b,{...n,render:e=>{let{location:n}=e;return a.token?t:Object(h.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}})},p=n(284),g=n(283),v=n(285),f=n(131),y=n(286),k=n(287),w=n(293),C=n(292);var S=e=>{let{children:t}=e;const n=Object(o.g)(),a=Object(c.useContext)(u);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(w.a,{bg:"light",variant:"light",className:"mb-4",children:[Object(h.jsx)(w.a.Brand,{href:"/",children:"QR Menu"}),Object(h.jsx)(C.a,{children:Object(h.jsx)(C.a.Link,{onClick:()=>{n.push("/places")},children:"Mes Restaurants"})}),Object(h.jsx)(C.a,{className:"flex-grow-1 justify-content-end",children:a.token?Object(h.jsx)(C.a.Link,{onClick:()=>{a.signOut(),n.push("/login")},children:"Se d\xe9connecter"}):[Object(h.jsx)(C.a.Link,{onClick:()=>{n.replace("/login")},children:"Connexion"},1),Object(h.jsx)(C.a.Link,{onClick:()=>{n.replace("/register")},children:"Inscription"},2)]})]}),Object(h.jsx)(g.a,{children:t})]})};var N=()=>Object(h.jsx)(S,{children:Object(h.jsx)(p.a,{className:"bg-light",children:Object(h.jsx)(g.a,{children:Object(h.jsxs)(v.a,{children:[Object(h.jsxs)(f.a,{md:6,className:"my-auto",children:[Object(h.jsx)("h1",{children:Object(h.jsx)("b",{children:"QR Code Menu"})}),Object(h.jsx)("h5",{className:"mt-4 mb-4",children:"Une fa\xe7on intelligente de partager avec vos clients votre menu num\xe9rique sous forme de code QR"}),Object(h.jsx)("br",{}),Object(h.jsx)(y.a,{href:"/places",variant:"standard",size:"lg",children:"Cr\xe9er votre Menu"})]}),Object(h.jsx)(f.a,{md:6,children:Object(h.jsx)(k.a,{src:"https://assets.materialup.com/uploads/ae60e834-349c-4c94-8189-2450f09ad37a/preview.gif",rounded:!0,fluid:!0})})]})})})}),E=n(295),z=n(291),P=n(288);var T=()=>{const[e,t]=Object(c.useState)(""),[n,a]=Object(c.useState)(""),s=Object(o.g)(),r=Object(c.useContext)(u);Object(c.useEffect)((()=>{r.token&&s.replace("/places")}));return Object(h.jsx)(S,{children:Object(h.jsx)(v.a,{className:"justify-content-center",children:Object(h.jsx)(f.a,{lg:6,md:8,children:Object(h.jsx)(E.a,{children:Object(h.jsxs)(E.a.Body,{children:[Object(h.jsx)("h3",{className:"text-center",children:Object(h.jsx)("b",{children:"CONNEXION"})}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Username"}),Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Enter Username",value:e,onChange:e=>t(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Mot de passe"}),Object(h.jsx)(z.a.Control,{type:"password",placeholder:"Enter Password",value:n,onChange:e=>a(e.target.value)})]}),Object(h.jsx)(y.a,{variant:"standard",block:!0,onClick:()=>{r.signIn(e,n,(()=>s.replace("/places")))},disabled:r.loading,children:r.loading?Object(h.jsx)(P.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Sign In"})]})})})})})};var _,I=()=>{const[e,t]=Object(c.useState)(""),[n,a]=Object(c.useState)(""),s=Object(o.g)(),r=Object(c.useContext)(u);Object(c.useEffect)((()=>{r.token&&s.replace("/places")}));return Object(h.jsx)(S,{children:Object(h.jsx)(v.a,{className:"justify-content-center",children:Object(h.jsx)(f.a,{lg:6,md:8,children:Object(h.jsx)(E.a,{children:Object(h.jsxs)(E.a.Body,{children:[Object(h.jsx)("h3",{className:"text-center",children:Object(h.jsx)("b",{children:"S'inscrire"})}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Username"}),Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Enter Username",value:e,onChange:e=>t(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Mot de passe"}),Object(h.jsx)(z.a.Control,{type:"password",placeholder:"Enter Password",value:n,onChange:e=>a(e.target.value)})]}),Object(h.jsx)(y.a,{variant:"standard",block:!0,onClick:()=>{r.register(e,n,(()=>s.replace("/places")))},disabled:r.loading,children:r.loading?Object(h.jsx)(P.a,{variant:"standard",as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Register"})]})})})})})},L=n(9),R=n(290),M=n(10),G=n(145);const A=M.a.div(_||(_=Object(L.a)(["\n  border: 1px dashed #ced4d9;\n  border-radius: 5px;\n  color: #6c757d;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 142px;\n  img {\n    height: 140px;\n  }\n"])));var D=function(e){let{value:t,onChange:n}=e;const[a,s]=Object(c.useState)(!1),r=Object(c.useCallback)((e=>{console.log(e),s(!0),function(e){const t=new FormData;return t.append("file",e),t.append("upload_preset","qrmenu_photos"),fetch("https://api.cloudinary.com/v1_1/democ4s/image/upload",{method:"POST",body:t}).then((e=>e.json()))}(e[0]).then((e=>n(e.url))).finally((()=>s(!1)))}),[]),{getRootProps:i,getInputProps:o}=Object(G.a)({onDrop:r,multiple:!1,accept:"image/*"});return Object(h.jsxs)(A,{...i(),children:[Object(h.jsx)("input",{...o()}),t?Object(h.jsx)("img",{src:t}):a?Object(h.jsx)(P.a,{variant:"standard",animation:"border",role:"staus"}):Object(h.jsx)("span",{children:"Glisser-d\xe9poser le fichier ici, ou cliquer pour s\xe9lectionner le fichier"})]})};var q,F,B=e=>{let{onDone:t}=e;const[n,a]=Object(c.useState)(""),[s,r]=Object(c.useState)(""),i=Object(c.useContext)(u);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{className:"text-center",children:"Place"}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Nom"}),Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Enter Name",value:n,onChange:e=>a(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Logo"}),Object(h.jsx)(D,{value:s,onChange:r})]}),Object(h.jsx)(y.a,{variant:"standard",block:!0,onClick:async()=>{var e,c;await(e={name:n,image:s},c=i.token,j("/api/places/",{data:e,token:c,method:"POST"}))&&(a(""),r(""),t())},children:"Ajouter"})]})};const H=M.a.div(q||(q=Object(L.a)(["\n  margin-bottom: 20px;\n  cursor: pointer;\n  transition: all 0.2s;\n  :hover {\n    transform: scale(1.05);\n  }\n  > div {\n    background-size: cover;\n    height: 200px;\n    border-radius: 5px;\n  }\n  > p {\n    margin-top: 5px;\n    font-size: 20px;\n    font-weight: bold;\n  }\n"]))),J=M.a.div(F||(F=Object(L.a)(["\n  border: 1px dashed gray;\n  height: 200px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  cursor: pointer;\n  background-color: white;\n  :hover {\n    background-color: #fbfbfb;\n  }\n"])));var U=()=>{const[e,t]=Object(c.useState)([]),[n,a]=Object(c.useState)(!1),s=Object(c.useContext)(u),r=Object(o.g)(),i=()=>a(!1),l=async()=>{const e=await(n=s.token,j("/api/places/",{token:n}));var n;e&&t(e)};return Object(c.useEffect)((()=>{l()}),[]),Object(h.jsxs)(S,{children:[Object(h.jsx)("h3",{children:"Mes Restaurants"}),Object(h.jsx)(R.a,{show:n,onHide:i,centered:!0,children:Object(h.jsx)(R.a.Body,{children:Object(h.jsx)(B,{onDone:()=>{l(),i()}})})}),Object(h.jsxs)(v.a,{children:[e.map((e=>Object(h.jsx)(f.a,{lg:4,children:Object(h.jsxs)(H,{onClick:()=>r.push("/places/".concat(e.id)),children:[Object(h.jsx)("div",{style:{backgroundImage:"url(".concat(e.image,")")}}),Object(h.jsx)("p",{children:e.name})]})},e.id))),Object(h.jsx)(f.a,{lg:4,children:Object(h.jsx)(J,{onClick:()=>a(!0),children:"Ajouter un restaurant"})})]})]})},Q=n(40),V=n(36),X=n(69),$=n(137),W=n(289),Z=n(294);var Y,K,ee=e=>{var t;let{place:n,onDone:a,item:s={}}=e;const[r,i]=Object(c.useState)(""),[o,d]=Object(c.useState)(!1),[b,x]=Object(c.useState)(s.category),[O,m]=Object(c.useState)(s.name),[p,g]=Object(c.useState)(s.price||0),[v,f]=Object(c.useState)(s.description),[k,w]=Object(c.useState)(s.image),[C,S]=Object(c.useState)(void 0===s.is_available||!!s.is_available),N=Object(c.useRef)(null),E=Object(c.useContext)(u);return Object(h.jsxs)("div",{children:[Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Category"}),Object(h.jsxs)("div",{className:"d-flex align-items-center",children:[Object(h.jsxs)(z.a.Control,{as:"select",value:b,onChange:e=>x(e.target.value),children:[Object(h.jsx)("option",{}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.map((e=>Object(h.jsx)("option",{value:e.id,children:e.name},e.id)))]}),Object(h.jsx)(y.a,{ref:N,variant:"link",onClick:()=>d(!0),children:Object(h.jsx)(X.b,{size:25})}),Object(h.jsx)(W.a,{show:o,target:N.current,placement:"bottom",rootClose:!0,onHide:()=>d(!1),children:Object(h.jsxs)(Z.a,{id:"popover-contained",children:[Object(h.jsx)(Z.a.Title,{as:"h3",children:"Categories"}),Object(h.jsxs)(Z.a.Content,{children:[Object(h.jsx)(z.a.Group,{children:Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Category Name",value:r,onChange:e=>i(e.target.value)})}),Object(h.jsx)(y.a,{variant:"standard",block:!0,onClick:async()=>{const e=await(t={name:r,place:n.id},c=E.token,j("/api/categories/",{data:t,token:c,method:"POST"}));var t,c;console.log(e),e&&(Object(l.b)("Category ".concat(e.name," was created."),{type:"success"}),x(e.id),i(""),d(!1),a())},children:"Ajouter une Categorie"})]})]})})]})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Nom"}),Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Enter Name",value:O,onChange:e=>m(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Prix"}),Object(h.jsx)(z.a.Control,{type:"number",placeholder:"Enter Price",value:p,onChange:e=>g(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Description"}),Object(h.jsx)(z.a.Control,{type:"text",placeholder:"Enter Description",value:v,onChange:e=>f(e.target.value)})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Image"}),Object(h.jsx)(D,{value:k,onChange:w})]}),Object(h.jsx)(z.a.Group,{children:Object(h.jsx)(z.a.Check,{type:"checkbox",label:"Is available?",checked:C,onChange:e=>S(e.target.checked)})}),Object(h.jsx)(y.a,{variant:"standard",block:!0,onClick:s.id?async()=>{const e=await(t=s.id,c={place:n.id,category:b,name:O,price:p,description:v,image:k,is_available:C},r=E.token,j("/api/menu_items/".concat(t),{data:c,token:r,method:"PATCH"}));var t,c,r;e&&(console.log(e),Object(l.b)("Menu Item ".concat(e.name," was updated"),{type:"success"}),x(""),m(""),g(0),f(""),w(""),S(!1),a())}:async()=>{const e=await(t={place:n.id,category:b,name:O,price:p,description:v,image:k,is_available:C},c=E.token,j("/api/menu_items/",{data:t,token:c,method:"POST"}));var t,c;console.log(e),e&&(Object(l.b)("Menu Item ".concat(e.name," was created"),{type:"success"}),x(""),m(""),g(0),f(""),w(""),S(!0),a())},children:s.id?"Update Menu Item":"+ Add Menu Item"})]})};M.a.div(Y||(Y=Object(L.a)(["\n  border-radius: 5px;\n  background-color: white;\n  margin-bottom: 30px;\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.1);\n  display: flex;\n  opacity: ",";\n  > div:first-child {\n    width: 40%;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    background-size: cover;\n  }\n  > div:last-child {\n    padding: 15px 20px;\n    min-height: 150px;\n  }\n"])),(e=>{let{active:t}=e;return t?1:.6})),M.a.div(K||(K=Object(L.a)(["\n  display: flex;\n  justify: between;\n"])));var te,ne,ce,ae=e=>{let{item:t,onEdit:n,onRemove:c,onOrder:a,color:s}=e;return Object(h.jsxs)(v.a,{fluid:!0,className:"justify-content-between align-items-center bg-white p-3 mb-2 rounded",children:[Object(h.jsx)(f.a,{children:Object(h.jsxs)("div",{style:{fontSize:23},children:[Object(h.jsx)("text",{style:{fontFamily:"jeanluc-bla"},children:t.name}),Object(h.jsx)("p",{style:{color:"#E83089",fontFamily:"jeanluc-thi"},children:t.description})]})}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{style:{color:"#E83089",fontFamily:"jeanluc-bla",fontSize:24},children:t.price})})]})},se=n(99),re=n.n(se),ie=n(136);const oe=M.a.div(te||(te=Object(L.a)(["\n  position: relative;\n"]))),le=M.a.div(ne||(ne=Object(L.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  background-color: rgba(255, 255, 255, 0.5);\n  > div {\n    margin: auto;\n  }\n"]))),je=M.a.div(ce||(ce=Object(L.a)(["\n  text-align: center;\n  margin-top: 200px;\n  h1 {\n    font-size: 100px;\n    font-weight: bold;\n    margin-bottom: 50px;\n  }\n  h2 {\n    font-size: 60px;\n    margin-bottom: 100px\n  }\n"])));var de,be=e=>{let{table:t,placeId:n}=e;const a=Object(c.useRef)(),s=Object(ie.useReactToPrint)({content:()=>a.current}),r="".concat(window.location.origin,"/menu/").concat(n,"/").concat(t);return Object(h.jsxs)(oe,{children:[Object(h.jsx)(re.a,{value:r,size:200}),Object(h.jsx)(le,{children:Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsx)(y.a,{variant:"standard",onClick:s,className:"mr-2",children:"Print Table ".concat(t)}),Object(h.jsx)(y.a,{variant:"standard",href:"/menu/".concat(n,"/").concat(t),target:"_blank",children:Object(h.jsx)(V.b,{size:25})})]})}),Object(h.jsx)("div",{style:{display:"none"},children:Object(h.jsxs)(je,{ref:a,children:[Object(h.jsxs)("h1",{children:["Table ",t]}),Object(h.jsx)("h2",{children:"Scan le Menu"}),Object(h.jsx)(re.a,{value:r,size:500})]})})]})};var he=Object(M.a)(y.a)(de||(de=Object(L.a)(["\n  width: 30px;\n  height: 30px;\n  margin: 0 10px;\n  font-size: 20px;\n  line-height: 18px;\n"])));var xe,Oe=e=>{let{show:t,onHide:n,place:c,onUpdatePlace:a}=e;return Object(h.jsx)(R.a,{show:t,onHide:n,size:"lg",centered:!0,children:Object(h.jsx)(R.a.Body,{className:"text-center pt-4",children:Object(h.jsxs)(g.a,{children:[Object(h.jsx)("h3",{children:"Tables QR Code"}),Object(h.jsxs)("div",{className:"d-flex align-items-center mt-4 mb-4",children:[Object(h.jsxs)("h5",{className:"mb-0 mr-2",children:["Total tables: ",Object(h.jsx)("b",{children:c.number_of_tables})]}),Object(h.jsx)(he,{variant:"lightgray",size:"sm",onClick:()=>a(c.number_of_tables-1),children:"-"}),Object(h.jsx)(he,{variant:"lightgray",size:"sm",onClick:()=>a(c.number_of_tables+1),children:"+"})]}),Object(h.jsx)(v.a,{children:Array.from({length:c.number_of_tables},((e,t)=>t+1)).map((e=>Object(h.jsx)(f.a,{lg:4,md:6,className:"mb-4",children:Object(h.jsx)(be,{table:e,placeId:c.id})},e)))})]})})})};const ue=M.a.div(xe||(xe=Object(L.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.05);\n"])));var me,pe,ge=()=>{var e;const[t,n]=Object(c.useState)({}),[a,s]=Object(c.useState)(!1),[r,i]=Object(c.useState)(null),[l,x]=Object(c.useState)(!1),O=()=>s(!1),m=Object(c.useContext)(u),p=Object(o.h)(),g=Object(o.g)(),k=()=>g.push("/places"),w=async()=>{const e=await d(p.id,m.token);e&&n(e)},C=e=>{window.confirm("Are you sure?")&&function(e,t){return j("/api/categories/".concat(e),{token:t,method:"DELETE"})}(e,m.token).then(w)},N=e=>{window.confirm("Are you sure?")&&function(e,t){return j("/api/menu_items/".concat(e),{token:t,method:"DELETE"})}(e,m.token).then(w)};return Object(c.useEffect)((()=>{w()}),[]),Object(h.jsxs)(S,{children:[Object(h.jsxs)(v.a,{children:[Object(h.jsx)(f.a,{lg:12,children:Object(h.jsxs)("div",{className:"mb-4",children:[Object(h.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(h.jsx)(y.a,{variant:"link",onClick:k,children:Object(h.jsx)(Q.a,{size:25,color:"black"})}),Object(h.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:t.name}),Object(h.jsx)(y.a,{variant:"link",onClick:()=>{var e,t;window.confirm("Are you sure?")&&(e=p.id,t=m.token,j("/api/places/".concat(e),{token:t,method:"DELETE"})).then(k)},children:Object(h.jsx)(V.a,{size:25,color:"red"})})]}),Object(h.jsx)(y.a,{variant:"link",onClick:()=>x(!0),children:Object(h.jsx)(V.c,{size:25})}),Object(h.jsx)(y.a,{variant:"link",href:"/places/".concat(p.id,"/orders"),children:Object(h.jsx)(X.a,{size:25})}),Object(h.jsx)(y.a,{variant:"link",href:"/places/".concat(p.id,"/settings"),children:Object(h.jsx)($.a,{size:25})})]})}),Object(h.jsx)(f.a,{md:4,children:Object(h.jsx)(ue,{children:Object(h.jsx)(ee,{place:t,onDone:w})})}),Object(h.jsx)(f.a,{md:8,children:null===t||void 0===t||null===(e=t.categories)||void 0===e?void 0:e.map((e=>Object(h.jsxs)("div",{className:"mb-5",children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(h.jsx)("h4",{className:"mb-0 mr-2",children:Object(h.jsx)("b",{children:e.name})}),Object(h.jsx)(y.a,{variant:"link",onClick:()=>C(e.id),children:Object(h.jsx)(V.a,{size:25,color:"red"})})]}),e.menu_items.map((e=>Object(h.jsx)(ae,{item:e,onEdit:()=>{i(e),s(!0)},onRemove:()=>N(e.id)},e.id)))]},e.id)))})]}),Object(h.jsx)(R.a,{show:a,onHide:O,centered:!0,children:Object(h.jsxs)(R.a.Body,{children:[Object(h.jsx)("h4",{className:"text-center",children:"Menu Item"}),Object(h.jsx)(ee,{place:t,onDone:()=>{w(),O()},item:r})]})}),Object(h.jsx)(Oe,{show:l,onHide:()=>x(!1),place:t,centered:!0,onUpdatePlace:e=>{b(t.id,{number_of_tables:e},m.token).then((e=>{e&&n(e)}))}})]})},ve=n(139);M.a.div(me||(me=Object(L.a)(["\n  text-align: center;\n  img {\n    border-radius: 5px;\n    margin-bottom: 20px;\n  }\n"])));const fe=M.a.div(pe||(pe=Object(L.a)(["\n  b,\n  p {\n    ","\n  },\n  background-image: url('https://iili.io/J12qAAl.png');\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n"])),(e=>{let{font:t}=e;return t&&"font-family: ".concat(t,";")}));var ye=e=>{var t;let{place:n,shoppingCart:c={},onOrder:a,font:s="",color:r=""}=e;const i=[{image:"https://iili.io/J12i3db.png",url:"https://www.codebarbenin.com/#/"},{image:"https://iili.io/J12iJ1e.png",url:"https://www.flycorsair.com/fr-bj"},{image:"https://iili.io/J12idru.png",url:"https://www.moov-africa.bj/"}];return Object(h.jsxs)(fe,{font:s,children:[Object(h.jsxs)(v.a,{className:"justify-content-between mt-5 ml-1 mr-1 align-items-end bg-wh",children:[Object(h.jsx)(f.a,{children:Object(h.jsx)("img",{src:n.image,width:150,height:150,alt:n.name})}),Object(h.jsx)("text",{className:"text-right",children:Object(h.jsxs)("b",{style:{fontSize:40,fontFamily:"arsenica",color:"white"},children:["Le ",Object(h.jsx)("br",{})," Menu"]})})]}),Object(h.jsx)(v.a,{className:"flex-nowrap ml-2 mt-5 overflow-auto",style:{gap:"2rem"},children:(null===n||void 0===n?void 0:n.categories)&&n.categories.map((e=>Object(h.jsx)("h3",{className:"bg-white p-3 rounded",onClick:()=>(e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})})(e.name),style:{cursor:"pointer",fontFamily:"arsenica",color:"black",fontSize:30},children:e.name},e.id)))}),null===n||void 0===n||null===(t=n.categories)||void 0===t?void 0:t.filter((e=>e.menu_items.filter((e=>e.is_available)).length)).map(((e,t)=>Object(h.jsxs)("div",{id:e.name,className:"mt-5 ml-3 mr-3",style:{scrollMarginTop:"100px"},children:[Object(h.jsx)("h4",{className:"mb-4",children:Object(h.jsx)("b",{style:{fontFamily:"arsenica",color:"white",fontSize:32},children:e.name})}),e.menu_items.filter((e=>e.is_available)).map((e=>{var t;return Object(h.jsx)(ae,{item:{...e,quantity:null===(t=c[e.id])||void 0===t?void 0:t.quantity},onOrder:a,color:r},e.id)})),(t+1)%3===0&&t/3<i.length&&Object(h.jsx)("div",{className:"mt-5 p-4",onClick:()=>{i[Math.trunc(t/3)].url&&window.open(i[Math.trunc(t/3)].url,"_blank")},style:{height:150,borderRadius:"1rem",backgroundImage:"url(".concat(i[Math.trunc(t/3)].image,")"),backgroundSize:"cover",backgroundPosition:"center"}})]},e.id))),Object(h.jsx)("footer",{className:"mt-5",children:Object(h.jsx)("center",{children:Object(h.jsxs)(f.a,{children:[Object(h.jsxs)(f.a,{className:"justify-content-center mb-5",style:{width:"100%",display:"flex-col",justifyContent:"center"},children:[Object(h.jsxs)("text",{style:{fontSize:30,fontFamily:"arsenica",color:"white"},children:["Probably",Object(h.jsx)("br",{}),"The Best Place",Object(h.jsx)("br",{}),"On Earth"]}),Object(h.jsxs)(v.a,{className:"justify-content-center align-items-center",children:[Object(h.jsx)("div",{className:"w-20 h-1 bg-[#E83089]",style:{backgroundColor:"#E83089",height:2,width:80}}),Object(h.jsx)("text",{style:{fontFamily:"jeanluc-bla",fontSize:22,paddingLeft:"1rem",paddingRight:"1rem",color:"#E83089"},children:"SINCE 2013"}),Object(h.jsx)("div",{className:"w-20 h-1 bg-[#E83089]",style:{backgroundColor:"#E83089",height:2,width:80}})]}),Object(h.jsx)("text",{style:{fontFamily:"jeanluc-bla",fontSize:22,paddingLeft:"1rem",paddingRight:"1rem",color:"white"},children:"OUVERT TOUS LES JOURS \xc0 PARTIR DE 18H"})]}),Object(h.jsxs)(f.a,{className:"mt-2 mb-5 rounded justify-content-center p-4 bg-white",style:{width:"100%",display:"flex-col",justifyContent:"center"},children:[Object(h.jsx)("text",{style:{fontSize:35,fontFamily:"arsenica"},children:"Suivez nous !"}),Object(h.jsxs)(v.a,{className:"justify-content-center align-items-center",style:{gap:"2rem",paddingTop:"1rem",paddingBottom:"1rem"},children:[Object(h.jsx)("div",{onClick:()=>{window.open("https://www.facebook.com/codebarbeninofficiel/?locale=fr_FR")},className:"p-4",style:{height:100,width:100,background:"white",borderRadius:"1rem",backgroundImage:"url(https://cdn-icons-png.flaticon.com/512/747/747374.png)",backgroundSize:"cover",backgroundPosition:"center"}}),Object(h.jsx)("div",{onClick:()=>{window.open("https://www.instagram.com/codebarbenin/")},className:"p-4",style:{height:100,width:100,background:"white",borderRadius:"1rem",backgroundImage:"url(https://cdn-icons-png.flaticon.com/512/1384/1384031.png)",backgroundSize:"cover",backgroundPosition:"center"}})]}),Object(h.jsxs)("text",{style:{fontFamily:"jeanluc-bla",fontSize:22,paddingLeft:"1rem",paddingRight:"1rem",color:"#E83089"},children:["R\xc9SERVATIONS AUX",Object(h.jsx)("br",{})," 96 90 10 10 ET 45 45 97 97"]})]}),Object(h.jsxs)("text",{style:{fontFamily:"jeanluc-bla",fontSize:22,paddingLeft:"1rem",paddingRight:"1rem",marginBottom:"10rem",color:"white"},children:["Powered by",Object(h.jsx)("br",{})]}),Object(h.jsx)("div",{className:"p-4",style:{height:30,width:150,backgroundRepeat:"no-repeat",borderRadius:"1rem",backgroundImage:"url(https://iili.io/J131exS.png)",backgroundSize:"contain",backgroundPosition:"center"}})]})})})]})},ke=n(138),we=n(43);const Ce=e=>{let{amount:t,items:n,onDone:a,color:s}=e;const[r,i]=Object(c.useState)(!1),d=Object(we.useStripe)(),b=Object(we.useElements)(),x=Object(c.useContext)(u),O=Object(o.h)();return Object(h.jsxs)(z.a,{onSubmit:async e=>{e.preventDefault();const{error:c,paymentMethod:s}=await d.createPaymentMethod({type:"card",card:b.getElement(we.CardElement)});if(!c){i(!0);const e=await(r={payment_method:s,amount:t,place:O.id,table:O.table,detail:n},o=x.token,j("/api/create_payment_intent/",{data:r,token:o,method:"POST"}));(null===e||void 0===e?void 0:e.success)?(Object(l.b)("Your order #".concat(e.order," is processing"),{type:"success"}),a(),i(!1)):(null===e||void 0===e?void 0:e.error)&&(Object(l.b)(e.error,{type:"error"}),i(!1))}var r,o},children:[Object(h.jsx)(we.CardElement,{options:{hidePostalCode:!0}}),Object(h.jsx)(y.a,{variant:"standard",style:{backgroundColor:s},className:"mt-4",block:!0,type:"submit",disabled:r,children:r?"Processing...":"Pay"})]})},Se=Object(ke.a)("pk_test_51I1mbCGi6ZyLV0th2pzGEGwGppthFwuXOjP8yfc3PAGwv7bWQicLsGsa4L8w0rjhDSlhZ3WEMl7sa0Ee2EUHHgec006b3rEyMV");var Ne=e=>Object(h.jsx)(we.Elements,{stripe:Se,children:Object(h.jsx)(Ce,{...e})});var Ee,ze=e=>{let{items:t,onAdd:n,onRemove:a,onPaymentDone:s,color:r}=e;const i=Object(c.useMemo)((()=>t.map((e=>e.quantity*e.price)).reduce(((e,t)=>e+t),0)),[t]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h3",{className:"text-center mb-4",children:Object(h.jsx)("b",{children:"Ta Commande"})}),Object(h.jsx)(E.a,{children:Object(h.jsxs)(E.a.Body,{children:[t.map((e=>Object(h.jsxs)("div",{className:"d-flex mb-4 align-items-center",children:[Object(h.jsxs)("div",{className:"flex-grow-1",children:[Object(h.jsx)("p",{className:"mb-0",children:Object(h.jsx)("b",{children:e.name})}),Object(h.jsxs)("span",{children:["$",e.price]})]}),Object(h.jsxs)("div",{className:"d-flex align-items-center",children:[Object(h.jsx)(he,{variant:"lightgray",size:"sm",onClick:()=>a(e),children:"-"}),Object(h.jsx)("span",{children:e.quantity}),Object(h.jsx)(he,{variant:"lightgray",size:"sm",onClick:()=>n(e),children:"+"})]})]},e.id))),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)("h5",{children:Object(h.jsx)("b",{children:"Total"})}),Object(h.jsx)("h5",{children:Object(h.jsxs)("b",{children:["$",i]})})]}),Object(h.jsx)("hr",{className:"mb-4"}),Object(h.jsx)(Ne,{amount:i,items:t,onDone:s,color:r})]})})]})};const Pe=Object(M.a)(y.a)(Ee||(Ee=Object(L.a)(["\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  border-radius: 50%;\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.2);\n  width: 60px;\n  height: 60px;\n"])));var Te=()=>{const[e,t]=Object(c.useState)({}),[n,a]=Object(c.useState)({}),[s,r]=Object(c.useState)(!1),i=Object(o.h)(),l=e=>{var t;a({...n,[e.id]:{...e,quantity:((null===(t=n[e.id])||void 0===t?void 0:t.quantity)||0)+1}})},j=Object(c.useMemo)((()=>Object.keys(n).map((e=>n[e].quantity)).reduce(((e,t)=>e+t),0)),[n]);return Object(c.useEffect)((()=>{(async()=>{const e=await d(i.id);console.log(e),e&&t(e)})()}),[]),Object(h.jsxs)(g.a,{className:"bg-green-800",style:{backgroundColor:"#E83089",backgroundImage:"url(https://iili.io/J12qAAl.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[Object(h.jsx)(v.a,{className:"justify-content-center",children:Object(h.jsx)(f.a,{lg:8,children:s?Object(h.jsx)(ze,{items:Object.keys(n).map((e=>n[e])).filter((e=>e.quantity>0)),onAdd:l,onRemove:e=>{var t;1===j&&r(!1),a({...n,[e.id]:{...e,quantity:((null===(t=n[e.id])||void 0===t?void 0:t.quantity)||0)-1}})},onPaymentDone:()=>{a({}),r(!1)},color:e.color}):Object(h.jsx)(ye,{place:e,shoppingCart:n,onOrder:l,color:e.color,font:e.font})})}),j?Object(h.jsx)(Pe,{variant:"standard",style:{backgroundColor:e.color},onClick:()=>r(!s),children:s?Object(h.jsx)(ve.a,{size:25}):j}):null]})};var _e=e=>{let{order:t,onComplete:n}=e;return Object(h.jsxs)(E.a,{className:"mb-3",children:[Object(h.jsxs)(E.a.Header,{className:"d-flex justify-content-between",children:[Object(h.jsx)("span",{children:"Order #".concat(t.id," - Table #").concat(t.table)}),Object(h.jsx)("span",{children:Object(h.jsxs)("b",{children:["$",t.amount]})})]}),Object(h.jsxs)(E.a.Body,{className:"d-flex justify-content-between",children:[Object(h.jsx)("div",{children:JSON.parse(t.detail).map((e=>Object(h.jsxs)("div",{className:"mb-2",children:[Object(h.jsxs)("span",{children:["x",e.quantity]}),Object(h.jsx)("img",{src:e.image,width:30,height:30,style:{borderRadius:3,margin:"0 10px"}}),Object(h.jsx)("span",{children:e.name})]})))}),Object(h.jsx)("div",{children:n?Object(h.jsx)(y.a,{variant:"standard",size:"md",onClick:n,children:"Done"}):null})]})]})};var Ie,Le=()=>{var e;const[t,n]=Object(c.useState)([]),a=Object(o.h)(),s=Object(o.g)(),r=Object(c.useContext)(u),i=async()=>{const e=await(t=a.id,c=r.token,j("/api/orders/?place=".concat(t),{token:c}));var t,c;e&&(console.log(e),n(e))},l=async e=>{var t,n,c;await(t=e,n={status:"completed"},c=r.token,j("/api/orders/".concat(t),{data:n,token:c,method:"PATCH"}))&&i()};return Object(c.useEffect)((()=>{i();const e=setInterval((()=>{i()}),5e3);return()=>clearInterval(e)}),[]),Object(h.jsxs)(S,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(h.jsx)(y.a,{variant:"link",onClick:()=>s.push("/places/".concat(a.id)),children:Object(h.jsx)(Q.a,{size:25,color:"black"})}),Object(h.jsx)("h3",{className:"mb-0 ml-2 mr-2",children:"Mes Commandes"})]}),Object(h.jsx)(v.a,{className:"justify-content-center",children:null===t||void 0===t||null===(e=t.filter((e=>"processing"===e.status)))||void 0===e?void 0:e.map((e=>Object(h.jsx)(f.a,{lg:8,children:Object(h.jsx)(_e,{order:e,onComplete:()=>l(e.id)})},e.id)))})]})},Re=n(144);const Me=M.a.div(Ie||(Ie=Object(L.a)(["\n  background-color: white;\n  padding: 20px;\n  border-radius: 5px;\n  box-shadow: 1px 1px 10px rgba(0,0,0,0.05);\n"])));var Ge=()=>{const[e,t]=Object(c.useState)({}),[n,a]=Object(c.useState)(""),[s,r]=Object(c.useState)(""),[i,j]=Object(c.useState)(!1),x=Object(o.h)(),O=Object(o.g)(),m=Object(c.useContext)(u);return Object(c.useEffect)((()=>{(async()=>{const e=await d(x.id);e&&(t(e),a(e.font),r(e.color))})()}),[]),Object(h.jsxs)(S,{children:[Object(h.jsxs)("div",{className:"d-flex align-items-center mb-4",children:[Object(h.jsx)(y.a,{variant:"link",onClick:()=>O.push("/places/".concat(x.id)),children:Object(h.jsx)(Q.a,{size:25,color:"black"})}),Object(h.jsx)("h3",{className:"mb-0 mr-2 ml-2",children:"Param\xe8tre du Menu"})]}),Object(h.jsxs)(v.a,{children:[Object(h.jsx)(f.a,{md:4,children:Object(h.jsxs)(Me,{children:[Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Police d'\xe9criture"}),Object(h.jsxs)(z.a.Control,{as:"select",value:n,onChange:e=>a(e.target.value),children:[Object(h.jsx)("option",{children:"Lato"}),Object(h.jsx)("option",{children:"Teko"}),Object(h.jsx)("option",{children:"Lobster"}),Object(h.jsx)("option",{children:"Caveat"}),Object(h.jsx)("option",{children:"Indie Flower"})]})]}),Object(h.jsxs)(z.a.Group,{children:[Object(h.jsx)(z.a.Label,{children:"Couleur"}),Object(h.jsx)(Re.a,{color:s,onChange:e=>r(e.hex),disableAlpha:!0,width:"100%"})]}),Object(h.jsx)(y.a,{className:"mt-4",variant:"standard",block:!0,onClick:async()=>{j(!0);const c=await b(e.id,{font:n,color:s},m.token);c&&(Object(l.b)("New settings is updated",{type:"success"}),t(c),j(!1))},disabled:i,children:"Sauvegarder"})]})}),Object(h.jsx)(f.a,{md:8,children:Object(h.jsx)(ye,{place:e,font:n,color:s,onOrder:()=>[]})})]})]})};var Ae=function(){return Object(h.jsxs)(O,{children:[Object(h.jsx)(i.a,{children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",children:Object(h.jsx)(N,{})}),Object(h.jsx)(o.b,{exact:!0,path:"/login",children:Object(h.jsx)(T,{})}),Object(h.jsx)(o.b,{exact:!0,path:"/register",children:Object(h.jsx)(I,{})}),Object(h.jsx)(o.b,{exact:!0,path:"/menu/:id/:table",children:Object(h.jsx)(Te,{})}),Object(h.jsx)(m,{exact:!0,path:"/places/:id",children:Object(h.jsx)(ge,{})}),Object(h.jsx)(m,{exact:!0,path:"/places",children:Object(h.jsx)(U,{})}),Object(h.jsx)(m,{exact:!0,path:"/places/:id/orders",children:Object(h.jsx)(Le,{})}),Object(h.jsx)(m,{exact:!0,path:"/places/:id/settings",children:Object(h.jsx)(Ge,{})})]})}),Object(h.jsx)(l.a,{})]})};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(Ae,{})}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.0d925b5a.chunk.js.map